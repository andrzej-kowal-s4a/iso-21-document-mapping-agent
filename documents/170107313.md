# Server management procedure

**Source URL:** https://smart4aviation.atlassian.net/wiki/spaces/S4A/pages/170107313
**Page ID:** 170107313
**Version:** 53

---

|  |  |
| --- | --- |
| **Type Of Document** | Procedure |
| **Policy Owner** | @Michał Białozór |
| **Author** | @Maciej Słota |
| **Approvals** | @Andrzej Kowal  @Wojciech Przybylski  @Jakub Zakrzewski  @Michał Białozór |
| **Effective From** | Immediately after publishing |
| **Linked policies / procedures / standards / guidelines** |  |
| **Review Lifecycle** | Review period: whenever important reasons arise, server reviews triggered by Jira as per lifecycle events |
| **Company** | (all)  AzimuthIT Sp. z o.o. Sp.k.  AzimuthIT Sp. z o.o.  Smart4Aviation Technologies B.V. |
| **Version** |  |

Glossary
========

| **name** | **description** | **examples/formulas** | **comment** |
| --- | --- | --- | --- |
| multithreading | enables multiple threads to run concurrently on a single CPU core. Each thread is represented as a virtual CPU (vCPU) on the instance.  An instance has a default number of CPU cores, which varies according to instance type | | **instance** | **no threads per core** | **no CPU cores** | **no vCPU cores** | | --- | --- | --- | --- | | m5.xlarge | 2 | 2 | 4 | |  |  |  |  |
| CPU (Central Procesing Unit) |  |  |  |
| vCPU (virtual...) |  |  |  |
| core |  |  |  |
|  |  |  |  |

Creating a request
==================

To request new Virtual Machine just create new issue in SERVER project:

Fields detailed:

| **Filed** | **Description** | **Initial Value** | **Comment** |
| --- | --- | --- | --- |
| Summary |  |  |  |
| Description | Why you need such VM,  Who will be use it,  What will be done there,  Which team uses it. Reason of requeste.   Resources  add "1" at each product you would like to use on req, Env. ( see table below)   Very helpful is to point a similar environment/used on prod etc. | see teble below | defined in a table data will be transfered to XLS that will calculate environment based on requsted products.  XLS is base on AWS calculation and [confluence page](https://smart4aviation.atlassian.net/wiki/display/PRODUCTS/Products+resource+requirements) |
| Business Justification | Justification for creating VM | EX:  JIRA Production Server - Project Env - Server dedicated to install Project Suite and tyest configuration and integrations before delivery to customer Product Env - Server dedicated to development of BRIEF product |  |
| No of vCPUs |  | "0" | will be changed after admin verification |
| RAM size GB |  | "0" | will changed after admin verification |

Table added to description **TO DO**:  JIRAADM-28808b6fd100-5a64-3d8f-8f9d-41b95d1c8c85System Jira

| **Install 1=Yes/0=No** | **Product/artefact/3party** | **Comment** |
| --- | --- | --- |
| 1 | S4A Smart BRIEF |  |
| 1 | S4A Smart BRIEF CABIN |  |
| 0 | S4A Smart COMM |  |
| 0 | S4A Smart CORE |  |
| 0 | S4A Smart CREW INFO |  |
| 1 | S4A Smart DOC |  |
| 1 | S4A Smart LOAD |  |
| 1 | S4A Smart MET |  |
| 1 | S4A Smart NOTAM MANAGER |  |
| 0 | S4A Smart PERFORMANCE |  |
| 1 | S4A Smart PORTAL (Include SHELL) |  |
| 0 | S4A Smart PORTAL Mobile iOS |  |
| 0 | S4A Smart SIS |  | 0 | S4A Smart VIEW+ |  |
| 0 | S4A eForms |  |
| 0 | S4A Smart PLAN (\*9) |  |
| 0 | S4A Smart Integration Layer |  |
| 1 | AMQ | defined by Admin on next stage. By default set "0" |
| 1 | OS | defined by Admin on next stage. By default set "0" |
| 0 | Other | defined by Admin on next stage. By default set "0" |

| **Filed** | **Description** | **Initial Value** | **Comment** |
| --- | --- | --- | --- |
| Owner | usually PDM/PM/Team leader |  |  |
| SOA | Source of financing (Subject of Activity), which covers the work to be done | For example :   1. S4A Smart PORTAL 2.14 ; 2. Any project example | it will be change to next version SOA. |
| Cost Center  <https://rcp.s4a.aero/office-mgt/costCenter> | Department owned by the Director of the owner | For example :   1. DEV 2. DELIVERY |  |
| Physical server |  |  | will be filled by admin who verificates after agreeing on requested resources |
| Expiration date (mandatory) | date when environment can be cancelled, | For Example:  31.12.2020 | **Not longer then 14 months** |
| Environment type |  | Ad-hoc or Permanent | usually Permanent |

JIRA WORKFLOW
=============

STEPS
=====

INITIAL
-------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Is to gather the need and document it.  Reporter should follow instruction defined in create slide.  All uncertain values should be lived empty. | Owner = Manager /PDM/PM/Team leader |  | N/A | Server Management JIRA ticket | * All manadatory fields are filled out. according instruction mentioned in creating a request slide | * Request is sent to Admin verificationTO ADMIN VERYFICATION  * Possibility t edit some data before next stepEDIT REQUEST | Owner |
|  |  |  |  |  |  |  |  |

ADMIN VERIFICATION
------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Admin is checking the business reuirements defined in Description againts product or 3rd party requriements -   <https://confluence.s4a.aero/pages/viewpage.action?spaceKey=PRODUCTS&title=Products+resource+requirements> | Admin |  | N/A | * XLS with calculated "size of environment" is mandatory and is base to prepare setup of environment. * XLS is added to ticket | * XLS with size calculation ready * No of vCPUs * RAM size GB | * Back to reporter :  PROVIDE MORE DETAILS * Request is send to review  SEND FOR APPROVAL * Request Rejected  REJECT **Transition to "CLOSE"** | Admin |

REVIEW REQUEST
--------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| In this step judgement about expence is made | Andrzej Kowal |  | N/A |  | Business Judgement is resonable and expence is approved from business point of view | * Back to reporter :  PROVIDE MORE DETAILS * request is send to realization: APPROVED * request is rejected REJECT **Transition to "CLOSE"** | Andrzej Kowal |

ENVIRONMENT PREPARATION
-----------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Admin task to setup virtual machine | Admin |  | N/A | * physical server is filled in | * Server ready to use * Server address | * Environment is ready to use ENV READY * Resources should be extended  LACK OF RESOURCES | Admin |

IN USE
------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| server was prepared and is in usage nothing to do until:  automated job that verifies env usage is executed or  manual action → review change is taken | EMPTY |  | N/A | N/A | * Server ready to use * Server address * Description of needed changes | * Environment needs some modifications (typicaly tiggered when a change is requested by owner)  REQUEST RESOURCE CHANGE * Manual request of environment usage ENV USAGE VERIFICATION | Owner,  Admin, Automator,  any user that wants to check if env is still needed |

REVIEW CHANGE
-------------

Open item: Do we ned admin verification before change is send to review?

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| When Prepared server needs some modifications this step is taken Business review of requested changes  **Transition from "IN USE"** | Andrzej Kowal |  | N/A |  | * Server in use & needs some changes * Defined in previous step description of changes | Change is negatively verified  REJECT CHANGE  Change is positively verified APPROVE | Andrzej Kowal |

CHANGE ENVIRONMENT SETUP
------------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| admin task to change virtual machine   settings  When prepared server needs some modifications that was approved **Transition from "REVIEW CHANGE"** | Admin |  | N/A | update:   * VCPU * RAM * physical machine | * Server in use & needs some changes * Approved defined description of changes | * Environment is ready to use  ENV READY  * Resources should be extended  LACK OF RESOURCES | Admin |

WAITING FOR RESOURCES
---------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Process to order missing parts is started by admins by creatig **order ticket** and issue waits until purchase is done  Order ticket should be lincked to server ticket - **server ticket is blocked by order ticket.**  **Transition from "CHANGE ENVIRONMENT SETUP" & "ENVIRONMENT PREPARATION"** | Admin |  | N/A | * Order Ticket linked to Server ticket | * Order Tiket is Closed | * back to not yet ready environment  BACK TO ENV PREPARATION  * Back to change of environment that needs some upgrade  BACK TO ENV CHANGE | Admin |

ENVIRONMENT USAGE VERIFICATION
------------------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Trigered to verify if environment is in use.  In this step Owner of the server is asked to confirm usage of the machine If no answer automated script will push ticket to status **SWITCH OFF ENVIRONMENT**    **Transition from "IN USE" triggered by Admin** | Owner |  | N/A | Owner makes decision if environment is still needed. Has to make decisions:   * extend time * change owner * decomission with backup (in transtion you need to document resourecs to be backed up) * switch of environemnt | * Owner decision * if no action for 3 weeks issue will be transitioned automaticaly to status decomission with backup | * Env will be backed up and decommitioned in next step  DECOMMITION WITH BACKUP * Owner of Env is changed  CHANGE OWNER * Request of time extention EXTEND TIME * Env will be decommitioned without backup in next step  DECOMMITION WITHOUT BACKUP | Owner |

SWITCH OFF ENVIRONMENT
----------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Single action to stop virtual server performed by itadm  On this state OWNER is an assignee to be aware that env will be decommited.  **Transition from** **"ENVIRONMENT USAGE VERIFICATION" & "REVIEW REQUEST"** | Owner |  | N/A |  | * list of resources to be backed up | * Env will be backed up and decommition in next step  SWITCHED OFF * Manual request of environment usage **(Last chance of OWNER to not delete an environment)**  ENV USAGE VERIFICATION | Admin  Owner |

BACKUP AND DECOMMITION
----------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| It admin prepares backup of resources named in ticket and environment is switched off.  This is used to make sure that the environmetn can be brought from backup back to operations in future  **Transition from** **"SWITCH OFF ENVIRONMENT"** | Admin |  | N/A | * list of resources to be backed up (defined on SWITCHED OFF transition) * Backup |  | Close environment with backup  BACKUP AND DECOMMITION DONE  **Transition to "CLOSE"** | Admin |

DELETE AND DECOMMITION
----------------------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| IT admin task where environement is destroyed and no backup prepared. No possiblity to restore env from backup.    **Transition from** **"ENVIRONMENT USAGE VERIFICATION" & "REVIEW REQUEST"** | Admin or Owner |  | N/A |  |  | * Manual request of environment usage check  ENV USAGE VERIFICATION * Request is sent to Admin verification  TO ADMIN VERYFICATION * Close environment ENV DELETED **Transition to "CLOSE"** | Admin |

CLOSED
------

| **Description** | **Assignee** | **SOA** | **SLA** | **Artifacts** | **Rules to make transition to next step** | **Transition** | **Transition owner** |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Previously closed environment can be reopen with initial parameters | Empty |  | N/A |  |  | * ENV can be reopen   REOPEN |  |

OTHER
=====

People responsible for the SERVER project
-----------------------------------------

* Technical assessment - Michał Białozór
* Request approval - Andrzej Kowal
* Backup needs - Wojciech Przybylski

Periodic tasks to be excuted by process Owner
---------------------------------------------

1. Review of statuses other than in Use and tirggering people to take actions
2. Review of gaps:

   1. project = "Server Management" and "Expiration Date"  < now() and status != closed
   2. expiration date set to ulimited time period

Open items:
-----------

* DONE automation for server verification is it running?

  + DONE  Automation for env verification is set up.

    - JQL: type  = "Server" AND "Expiration Date" < endOfMonth(1) AND status = "In Use"
  + DONE  Autoamtion when environemnt veriification not done for 3 week to execute transtiion decomission

    - JQL: project = "Server Management" and type  = "Server"  AND status = "environment usage verification" AND updated  < -3w
* DONE: how to secure setting expiration dates for next 10 years Currently the expisation date can be set today +14 months.
* IN PROGRESS : Procedure documentation
* IN PROGRESS: XLS with env calculation
* TO DO: Add table with products to description to be presented by default.
* TO DO: delete test ticket when documentaiton done: SERVER-2478b6fd100-5a64-3d8f-8f9d-41b95d1c8c85System Jira
* TO DO: Servers management report

